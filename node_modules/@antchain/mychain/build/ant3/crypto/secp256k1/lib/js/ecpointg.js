"use strict";var Buffer=require("safe-buffer").Buffer,BN=require("./bn"),ECPoint=require("./ecpoint"),ECJPoint=require("./ecjpoint");function ECPointG(){this.x=BN.fromBuffer(Buffer.from("79BE667EF9DCBBAC55A06295CE870B07029BFCDB2DCE28D959F2815B16F81798","hex")),this.y=BN.fromBuffer(Buffer.from("483ADA7726A3C4655DA4FBFC0E1108A8FD17B448A68554199C47D08FFB10D4B8","hex")),this.inf=!1,this._precompute()}ECPointG.prototype._precompute=function(){for(var e=new ECPoint(this.x,this.y),t=new Array(1+Math.ceil(64.25)),n=t[0]=e,o=1;o<t.length;++o){for(var r=0;r<4;r++)n=n.dbl();t[o]=n}this.precomputed={naf:e._getNAFPoints(7),doubles:{step:4,points:t,negpoints:t.map(function(e){return e.neg()})}}},ECPointG.prototype.mul=function(e){for(var t=this.precomputed.doubles.step,n=this.precomputed.doubles.points,o=this.precomputed.doubles.negpoints,r=e.getNAF(1),e=((1<<t+1)-(t%2==0?2:1))/3,i=[],u=0;u<r.length;u+=t){for(var f=0,l=u+t-1;u<=l;l--)f=(f<<1)+r[l];i.push(f)}for(var p=new ECJPoint(null,null,null),d=new ECJPoint(null,null,null),s=e;0<s;s--){for(var a=0;a<i.length;a++)i[a]===s?d=d.mixedAdd(n[a]):i[a]===-s&&(d=d.mixedAdd(o[a]));p=p.add(d)}return ECPoint.fromECJPoint(p)},ECPointG.prototype.mulAdd=function(e,t,n){for(var o=this.precomputed.naf,t=t._getNAFPoints1(),r=[o.points,t.points],i=[e.getNAF(o.wnd),n.getNAF(t.wnd)],u=new ECJPoint(null,null,null),f=[null,null],l=Math.max(i[0].length,i[1].length);0<=l;l--){for(var p=0;0<=l&&(f[0]=0|i[0][l],f[1]=0|i[1][l],0===f[0]&&0===f[1]);++p,--l);if(0<=l&&(p+=1),u=u.dblp(p),l<0)break;for(var d=0;d<2;d++){var s,a=f[d];0!==a&&(0<a?s=r[d][a>>1]:a<0&&(s=r[d][-a>>1].neg()),u=void 0===s.z?u.mixedAdd(s):u.add(s))}}return u},module.exports=new ECPointG;
"use strict";function _typeof(r){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(r){return typeof r}:function(r){return r&&"function"==typeof Symbol&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r})(r)}var utf8=require("./utf8"),BigNumber=require("bignumber.js"),CryptoJS=require("crypto-js"),_sha=require("crypto-js/sha3"),Buffer=require("safe-buffer").Buffer,ParamUtil={sha3:function(r,t){return"hex"===t&&(2<r.length&&"0x"===r.substr(0,2)&&(r=r.substr(2)),r=CryptoJS.enc.Hex.parse(r)),_sha(r,{outputLength:256}).toString()},getHash:function(r,t){var e="0x";t&&(e="");t=r.toString("hex");if(ParamUtil.isString(r)){if("0x"!==r.substr(0,2))return e+CryptoJS.SHA256(r).toString();t=r.substr(2)}t=CryptoJS.enc.Hex.parse(t);return e+CryptoJS.SHA256(t).toString(CryptoJS.enc.Hex)},isBuffer:function(r){return Buffer.isBuffer(r)},isBigNumber:function(r){return r&&(r instanceof BigNumber||r.constructor&&"BigNumber"===r.constructor.name)},isString:function(r){return"string"==typeof r||r&&r.constructor&&"String"===r.constructor.name},isBoolean:function(r){return"boolean"==typeof r},isObject:function(r){return null!==r&&!Array.isArray(r)&&"object"===_typeof(r)},isArray:function(r){return Array.isArray(r)},isFunction:function(r){return"function"==typeof r},toBuffer:function(r,t){if(ParamUtil.isBuffer(r))return r;"number"==typeof r&&(r=r.toString(16)),ParamUtil.isString(r)&&0===r.indexOf("0x")&&(r=r.slice(2)),t=t||Math.ceil(r.length/2);for(var e=Buffer.alloc(t),n=0;n<t;n++){var f=r.slice(2*n,2*n+2)||"00";e.write(f,n,1,"hex")}return e},padStart:function(r,t,e){return r.length<parseInt(t)?new Array(parseInt(t)-r.length+1).join(e||"0")+r:r},padLeft:function(r,t,e){return ParamUtil.padStart(r,t,e)},padEnd:function(r,t,e){return r.length<parseInt(t)?r+new Array(parseInt(t)-r.length+1).join(e||"0"):r},padRight:function(r,t,e){return ParamUtil.padEnd(r,t,e)},toBigNumber:function(r,t){return ParamUtil.isBigNumber(r=r||0)?r:ParamUtil.isString(r)?0===r.indexOf("0x")||0===r.indexOf("-0x")?new BigNumber(r.replace("0x",""),16):new BigNumber(r,t||16):new BigNumber(r.toString(10),10)},toDecimal:function(r,t){return ParamUtil.toBigNumber(r,t).toNumber()},decimalToHex:function(r,t){var e="0x";t&&(e="");t=ParamUtil.toBigNumber(r),r=t.toString(16);return t.lessThan(0)?"-"+e+r.substr(1):e+r},stringToHex:function(r,t){return ParamUtil.decimalToHex(r,t)},asciiToHex:function(r,t){for(var e="",n=0;n<r.length;n++){var f=r.charCodeAt(n).toString(16);e+=f.length<2?"0"+f:f}return"0x"+ParamUtil.padEnd(e,t)},utf8ToHex:function(r,t,e){r=utf8.encode(r);for(var n="",f=0;f<r.length;f++){var i=r.charCodeAt(f);if(0===i){if(!t)break;n+="00"}else{i=i.toString(16);n+=i.length<2?"0"+i:i}}return(e?"":"0x")+n},bufferToHex:function(r,t){var e=t?"":"0x";return ParamUtil.isBuffer(r)?e+r.toString("hex"):ParamUtil.toHex(r,t)},fromUtf8:function(r,t){return ParamUtil.utf8ToHex(r,t)},toAscii:function(r,t){var e="",n=0;for("0x"===r.substring(0,2)&&(n=2);n<r.length;n+=2){var f=parseInt(r.substr(n,2),16);if(t&&0===f)break;e+=String.fromCharCode(f)}return e},toUtf8:function(r){return utf8.decode(ParamUtil.toAscii(r))},toHex:function(r,t){return ParamUtil.isBoolean(r)?ParamUtil.decimalToHex(+r,t):ParamUtil.isBigNumber(r)?ParamUtil.decimalToHex(r,t):"object"===_typeof(r)?ParamUtil.utf8ToHex(JSON.stringify(r),!1,t):ParamUtil.isString(r)?0===r.indexOf("-0x")?ParamUtil.stringToHex(r,t):0===r.indexOf("0x")?r:ParamUtil.utf8ToHex(r,1,t):ParamUtil.decimalToHex(r,t)},toTwosComplement:function(r){r=ParamUtil.toBigNumber(r).round();return r.lessThan(0)?new BigNumber("ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff",16).plus(r).plus(1):r},getUInt32BE:function(r){var t=new Buffer(4);return t.writeUInt32BE(r),t.toString("hex")},hexToBuffer:function(r){return ParamUtil.isString(r)?("0x"===r.substr(0,2)&&(r=r.substr(2)),Buffer.from(r,"hex")):r},stringToBase64:function(r){return Buffer.from(r).toString("base64")}};module.exports=ParamUtil;
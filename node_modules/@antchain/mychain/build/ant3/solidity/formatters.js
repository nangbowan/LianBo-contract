"use strict";var BigNumber=require("bignumber.js"),utils=require("../util"),SolidityParam=require("./param"),formatInputInt=function(t){BigNumber.config({ROUNDING_MODE:BigNumber.ROUND_DOWN});t=utils.padLeft(utils.toTwosComplement(t).toString(16),64);return new SolidityParam(t)},formatInputBytes=function(t){var u=utils.toHex(t).substr(2),t=Math.floor((u.length+63)/64),u=utils.padRight(u,64*t);return new SolidityParam(u)},formatInputDynamicBytes=function(t){var u=(r=(r=utils.toHex(t).substr(2)).length%2!=0?"0"+r:r).length/2,t=Math.floor((r.length+63)/64),r=utils.padRight(r,64*t);return new SolidityParam(formatInputInt(u).value+r)},formatInputString=function(t){var u=(r=utils.fromUtf8(t).substr(2)).length/2,t=Math.floor((r.length+63)/64),r=utils.padRight(r,64*t);return new SolidityParam(formatInputInt(u).value+r)},formatInputBool=function(t){return new SolidityParam("000000000000000000000000000000000000000000000000000000000000000"+(t?"1":"0"))},formatInputReal=function(t){return formatInputInt(new BigNumber(t).times(new BigNumber(2).pow(128)))},signedIsNegative=function(t){return"1"===new BigNumber(t.substr(0,1),16).toString(2).substr(0,1)},formatOutputInt=function(t){t=t.staticPart()||"0";return signedIsNegative(t)?new BigNumber(t,16).minus(new BigNumber("ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff",16)).minus(1):new BigNumber(t,16)},formatOutputUInt=function(t){t=t.staticPart()||"0";return new BigNumber(t,16)},formatOutputReal=function(t){return formatOutputInt(t).dividedBy(new BigNumber(2).pow(128))},formatOutputUReal=function(t){return formatOutputUInt(t).dividedBy(new BigNumber(2).pow(128))},formatOutputBool=function(t){return"0000000000000000000000000000000000000000000000000000000000000001"===t.staticPart()},formatOutputBytes=function(t,u){u=u.match(/^bytes([0-9]*)/),u=parseInt(u[1]);return"0x"+t.staticPart().slice(0,2*u)},formatOutputDynamicBytes=function(t){var u=2*new BigNumber(t.dynamicPart().slice(0,64),16).toNumber();return"0x"+t.dynamicPart().substr(64,u)},formatOutputString=function(t){var u=2*new BigNumber(t.dynamicPart().slice(0,64),16).toNumber();return utils.toUtf8(t.dynamicPart().substr(64,u))},formatOutputAddress=function(t){t=t.staticPart();return"0x"+t.slice(t.length-40,t.length)},formatOutputIdentity=function(t){return"0x"+t.staticPart()};module.exports={formatInputInt:formatInputInt,formatInputBytes:formatInputBytes,formatInputDynamicBytes:formatInputDynamicBytes,formatInputString:formatInputString,formatInputBool:formatInputBool,formatInputReal:formatInputReal,formatOutputInt:formatOutputInt,formatOutputUInt:formatOutputUInt,formatOutputReal:formatOutputReal,formatOutputUReal:formatOutputUReal,formatOutputBool:formatOutputBool,formatOutputBytes:formatOutputBytes,formatOutputDynamicBytes:formatOutputDynamicBytes,formatOutputString:formatOutputString,formatOutputAddress:formatOutputAddress,formatOutputIdentity:formatOutputIdentity};
import { encodeUintToLEB128, decodeLEB128ToUint, getLEB128FromBytes } from './leb128';
import { getBytes } from './bytes';

const num = 624485;
const res = getBytes<u8[]>([0xe5, 0x8e, 0x26]);

describe('utils/leb128', () => {
  test('encodeUintToLEB128', () => {
    expect(encodeUintToLEB128(num)).toStrictEqual(res);
  });

  test('decodeLEB128ToUint', () => {
    expect(decodeLEB128ToUint(res)).toBe(num);
  });

  test('getLEB128FromBytes', () => {
    const bytes = getBytes<u8[]>([0xe5, 0x8e, 0x26, 0xff, 0xff]);
    expect(getLEB128FromBytes(bytes)).toStrictEqual(res);
  });
});

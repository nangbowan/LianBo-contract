import {
  checkAccount,
  getOrigin,
  getSender,
  getSelf,
  getAccountStatus,
  AccountStatus,
  getBalance,
  getRecoverKey,
} from './account';
import { Identity } from '..';

const id = Identity.fromStr('1234567890123456789012345678901234567890123456789012345678901234');

describe('chain/account', () => {
  test('getOrigin', () => {
    expect(getOrigin()).toBe(id);
  });

  test('getSender', () => {
    expect(getSender()).toBe(id);
  });

  test('getSelf', () => {
    expect(getSelf()).toBe(id);
  });

  test('checkAccount', () => {
    expect(checkAccount(id)).toBe(true);
  });

  test('getAccountStatus', () => {
    expect(getAccountStatus(id)).toBe(AccountStatus.FREEZE);
  });

  test('getBalance', () => {
    expect(getBalance(id)).toBe(666);
  });

  test('getRecoverKey', () => {
    expect(getRecoverKey(id)).toBe(
      '1234567890123456789012345678901234567890123456789012345678908888',
    );
  });

  // TODO: getAuthMap 的实现有问题，先把单测删掉
  // test('getAuthMap', () => {
  //   const authMap = new Map<Identity, u32>();
  //   authMap.set(Identity.fromStr('public-key-1-1234567890123456789'), 1);
  //   authMap.set(Identity.fromStr('public-key-2-1234567890123456789'), 1);
  //   authMap.set(Identity.fromStr('public-key-3-1234567890123456789'), 1);
  //   expect(getAuthMap(id)).toStrictEqual(authMap);
  // });
});
